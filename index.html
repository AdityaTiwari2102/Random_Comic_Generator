<!DOCTYPE html>
<html>
    <head>
        <style>
            *{
                box-sizing: border-box;
            }
            div{
                text-align: center;
            }
            img{
                padding: 30px;
            }
        </style>
    </head>
<body>
    <div>
        <p>Click the button to display a random comic strip.</p>
        <button type="button" onclick="loadDoc()">Generate</button><br>
        <img src="https://via.placeholder.com/200x200" id="pic">
    </div>
    <script>
        var rand_no; 
        var url;
        var count = 0;
        var val = new Array();
        var key = JSON.parse(localStorage.getItem("randomNumber")) || [];
        function loadDoc() {
            rand_no = Math.floor((Math.random()*999)+1);
            check(rand_no);
            count = 1;
        }
        function check(rand_no){
            if(count == 1){
                val = JSON.parse(localStorage.getItem("randomNumber"));
                for(var i=0; i<val.length; i++){
                    var x = val[i];
                    if(x == rand_no){
                        loadDoc();
                        return;
                    }
                }
            }
            key.push(rand_no);
            localStorage.setItem("randomNumber", JSON.stringify(key));
            url = "https://xkcd.now.sh/" + rand_no;
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var xyz = JSON.parse(this.responseText);
                    document.getElementById('pic').src=xyz.img;
                }
            };
            xhttp.open("GET", url, true);
            xhttp.send();
        }
    </script>
</body>
</html>
